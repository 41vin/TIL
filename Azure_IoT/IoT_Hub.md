- IoT Hub는 클라우드에서 호스팅 관리되는 서비스이며, IoT 솔루션과 이를 통해 관리하는 디바이스 간의 양방향 통신을 위한 중앙 메시지 허브 역할을 함.

- IoT Hub로 IoT 솔루션과 IoT 솔루션이 관리하는 디바이스 간의 고도로 안전하고 안정적인 통신이 가능해짐. <br>
- Azure IoT Hub는 IoT 디바이스에 연결되는 클라우드 호스팅 솔루션 백 엔드를 제공함. IoT Hub를 사용하면 디바이스 단위 인증, 기본 제공 디바이스 관리, 크기가 조정된 프로비전을 통해 클라우드 에지까지 솔루션을 확장할 수 있음

Azure IoT Hub
![Azure_IoT_Hub](https://learn.microsoft.com/ko-kr/training/modules/introduction-to-iot-hub/media/iot-hub-architecture.png)

# IoT Hub란 무엇인가?

IoT Hub는 디바이스 단위 인증, 디바이스 관리, 크기 조정도니 프로비전을 사용하여 디바이스를 연결하는 클라우드 호스팅 솔루션 백 엔드를 제공함

## IoT Hub가 비즈니스 문제에 적합한지 알아보는데 도움이 되는 몇 가지 정의들

- **원격분석**: 원격 분석은 IoT 디바이스가 수신하는 값을 기록하고 전송하는 프로세스임. 원격 분석은 IoT 솔루션의 핵심 기능
- **프로비전**: 클라우드에 디바이스를 프로비전하면 디바이스가 클라우드에 고유하게 식별됨. 또한 프로비전은 디바이스의 보안 프로토콜과 액세스 권한, 권한을 설정함
- **라우팅**: 메시지 라우팅을 사용하면 확장 가능하고 신뢰할 수 있는 자동화된 방식으로 디바이스에서 클라우드 서비스로 메시지를 보낼 수 있음. 디바이스 원격 분석 메시지 또는 이벤트(ex. 디바이스 수명 주기 이벤트)를 보낼 수 있음
- **크기 조정**: 클라우드 솔루션에서 크기 조정은 솔루션의 범위를 확장하거나 축소할 필요성과 관련됨. 솔루션을 확장하거나 축소할 수 있는 기능을 통해 개발자는 다양한 종류의 솔루션을 유연하게 배포할 수 있음
- **서비스 가용성**: 서비스 가용성은 클라우드 서비스에 대해 합의된 운영 성능 수준(일반적으로 작동 시간)을 보장하는 데 목적이 있음. 서비스 가용성은 SLA(Service Level Aggrement)에 의해 정의됨
<br>
## IoT 허브의 기능은 다음과 같음

**보안 통신**: IoT Hub는 여러 인증 유형을 사용한 디바이스 단위 인증을 제공하므로 디바이스가 안전하게 데이터를 전송하는 보안 통신이 가능함
**솔루션 크기 조정**: IoT Hub로 수백만 개의 동시 연결 디바이스와 초당 수백만 개의 이벤트까지 확장하여 IoT 워크로드를 지원할 수 있음. 이 때 사용하려는 기능과 매일 이동하려는 데이터의 양이라는 두 가지를 고려해야 함

## Azure IoT Hub의 계층

  - 표준 계층: 모든 기능을 갖춘 양방향 통신 기능 개발을 위해 사용
  - 기본 계층: 디바이스에서 클라우드로의 단방향 통신만 필요할 때 사용

데이터 처리량은 솔루션의 크기를 조정하는 방법을 결정하는 고려 사항임. 각 IoT Hub 계층은 숫자 1,2,3으로 식별되는 세 가지 크기로 제공됨. 

1. **디바이스 데이터 라우팅**: IoT Hub를 사용하면 자동화된 규칙을 기반으로 메세지를 보내 데이터 트래픽을 최적화할 수 있음
2. **디바이스에 명령 보내기**: IoT Hub는 클라우드-디바이스 메세지도 보낼 수 있음. 클라우드-디바이스 메세지를 사용하면 연결된 디바이스에 명령과 알림을 보낼 수 있음.
3. **IoT 솔루션의 상태 모니터링**: IoT Hub를 통해 디바이스 생성, 디바이스 통신 오류, 디바이스 연결 같은 이벤트를 추적할 수 있음
4. **다른 서비스와 통합**: IoT Hub를 다른 Azure 서비스와 원활하게 통합하여 End-to-end 솔루션을 빌드할 수 있음. 예를 들어 IoT Hub를 Azure Logic Apps 및 Event Grid와 통합하여 비즈니스 프로세스를 자동화할 수 있음
5. **항상 사용 가능하고 복원력 있는 솔루션 만들기**: 지정된 서비스 수준 계약에 따라 항상 사용 가능하고 기본 제공 장애 조치(Failover) 기능을 활용하는 솔루션을 만듦
6. **거의 모든 디바이스 연결**: Azure IoT 오픈 소스 디바이스 SDK를 사용하면 연결된 디바이스에서 실행되고 IoT Hub와 상호 작용하는 솔루션을 빌드 가능함. MQTT, HTTPS 1.1 또는 AMQP와 같은 프로토콜을 사용하여 디바이스를 기본적으로 IoT Hub에 연결할 수도 있음
